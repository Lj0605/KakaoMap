<meta http-equiv="Content-Type" content="text/html; charset=euc-kr">
<html>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<head>
    <title>주소 찾기</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0"/>
</head>

<body>
    <div id="wrap" style="width:100%;height:100%;overflow:hidden;"></div>

</body>
<script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=c05ba5aa3654f58fae632c37aec0f8a0&libraries=services,clusterer,drawing"></script>

<script type="text/javascript">
    // 우편번호 찾기 찾기 화면을 넣을 element
    var element_wrap = document.getElementById('wrap');
    var latitude = 37.1;
    var longitude = 127.2;

    function foldDaumPostcode() {
        // iframe을 넣은 element를 안보이게 한다.
        element_wrap.style.display = 'none';
    }

    // 현재 scroll 위치를 저장해놓는다.
    var currentScroll = Math.max(document.body.scrollTop, document.documentElement.scrollTop);
    new daum.Postcode({
        oncomplete: function (data) {

            // 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.

            // 커서를 상세주소 필드로 이동한다
            // document.getElementById("sample3_detailAddress").focus();

            // iframe을 넣은 element를 안보이게 한다.
            // (autoClose:false 기능을 이용한다면, 아래 코드를 제거해야 화면에서 사라지지 않는다.)
            element_wrap.style.display = 'none';

            // 우편번호 찾기 화면이 보이기 이전으로 scroll 위치를 되돌린다.
            // document.body.scrollTop = currentScroll;

            geocoder.addressSearch(data.address, function (results, status) {
                // 정상적으로 검색이 완료됐으면
                // document.getElementById("sample3_address").value = data.address;
                if (status === daum.maps.services.Status.OK) {
                    var result = results[0]; //첫번째 결과의 값을 활용
                    // 해당 주소에 대한 좌표를 받아서
                    data.latitude = result.y.toString();
                    data.longitude = result.x.toString();
                    callbackMessage(JSON.stringify(data));
                }
            });
        },

        // 우편번호 찾기 화면 크기가 조정되었을때 실행할 코드를 작성하는 부분. iframe을 넣은 element의 높이값을 조정한다.
        onresize: function (size) {
            //   element_wrap.style.height = size.height + 'px';
        },
        maxSuggestItems: 5,
        alwaysShowEngAddr: false,
        hideMapBtn: true,
        hideEngBtn: false,
        width: '100%',
        height: '100%',
        autoClose: false,
    }).embed(element_wrap);

    // iframe을 넣은 element를 보이게 한다.
    element_wrap.style.display = 'block';

    //주소-좌표 변환 객체를 생성
    var geocoder = new kakao.maps.services.Geocoder();

    function callbackMessage(message) {
        try {
            onComplete.postMessage(message);
        } catch (err) { }
    }

</script>

</html>
