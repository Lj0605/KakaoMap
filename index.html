<meta http-equiv="Content-Type" content="text/html; charset=euc-kr">
<html>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<head>
</head>

<body>
  <div id="wrap" style="width:100%;height:100%;overflow:hidden;"></div>

</body>
<script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=f453b4377d52ec155b9cbd793044f66b&libraries=services,clusterer,drawing"></script>
<script type="text/javascript">
  // 우편번호 찾기 찾기 화면을 넣을 element
  var element_wrap = document.getElementById('wrap');
  var latitude = 37.1;
  var longitude = 127.2;

  function foldDaumPostcode() { 
    element_wrap.style.display = 'none';
  }

  // 현재 scroll 위치를 저장해놓는다.
  var currentScroll = Math.max(document.body.scrollTop, document.documentElement.scrollTop);
  new daum.Postcode({
    oncomplete: function(data) {

      // 검색결과 항목을 클릭했을때 실행할 코드를 작성하는 부분.
 
      // document.getElementById("sample3_detailAddress").focus();
  
      element_wrap.style.display = 'none';
 
      // document.body.scrollTop = currentScroll;

      geocoder.addressSearch(data.address, function(results, status) {
        // 정상적으로 검색이 완료됐으면
        // document.getElementById("sample3_address").value = data.address;
        if (status === daum.maps.services.Status.OK) {
          var result = results[0]; //첫번째 결과의 값을 활용
 
          data.latitude = result.y.toString();
          data.longitude = result.x.toString();
          callbackMessage(JSON.stringify(data));
        }
      });
    },
 
    onresize: function(size) {
      //   element_wrap.style.height = size.height + 'px';
    },
    maxSuggestItems: 5,
    alwaysShowEngAddr: false,
    hideMapBtn: true,
    hideEngBtn: false,
    width: '100%',
    height: '100%',
    autoClose: false,
  }).embed(element_wrap);
 
  element_wrap.style.display = 'block';

  //주소-좌표 변환 객체를 생성
  var geocoder = new kakao.maps.services.Geocoder();

  function callbackMessage(message) {
    try {
      onComplete.postMessage(message);
    } catch (err) {}
  }

</script>

</html>
